{"version":3,"file":"date-time-pattern-generator.js","sources":["../../../../../../node_modules/@formatjs/icu-messageformat-parser/date-time-pattern-generator.js"],"sourcesContent":["import { timeData } from \"./time-data.generated.js\";\n/**\n* Returns the best matching date time pattern if a date time skeleton\n* pattern is provided with a locale. Follows the Unicode specification:\n* https://www.unicode.org/reports/tr35/tr35-dates.html#table-mapping-requested-time-skeletons-to-patterns\n* @param skeleton date time skeleton pattern that possibly includes j, J or C\n* @param locale\n*/\nexport function getBestPattern(skeleton, locale) {\n\tlet skeletonCopy = \"\";\n\tfor (let patternPos = 0; patternPos < skeleton.length; patternPos++) {\n\t\tconst patternChar = skeleton.charAt(patternPos);\n\t\tif (patternChar === \"j\") {\n\t\t\tlet extraLength = 0;\n\t\t\twhile (patternPos + 1 < skeleton.length && skeleton.charAt(patternPos + 1) === patternChar) {\n\t\t\t\textraLength++;\n\t\t\t\tpatternPos++;\n\t\t\t}\n\t\t\tlet hourLen = 1 + (extraLength & 1);\n\t\t\tlet dayPeriodLen = extraLength < 2 ? 1 : 3 + (extraLength >> 1);\n\t\t\tlet dayPeriodChar = \"a\";\n\t\t\tlet hourChar = getDefaultHourSymbolFromLocale(locale);\n\t\t\tif (hourChar == \"H\" || hourChar == \"k\") {\n\t\t\t\tdayPeriodLen = 0;\n\t\t\t}\n\t\t\twhile (dayPeriodLen-- > 0) {\n\t\t\t\tskeletonCopy += dayPeriodChar;\n\t\t\t}\n\t\t\twhile (hourLen-- > 0) {\n\t\t\t\tskeletonCopy = hourChar + skeletonCopy;\n\t\t\t}\n\t\t} else if (patternChar === \"J\") {\n\t\t\tskeletonCopy += \"H\";\n\t\t} else {\n\t\t\tskeletonCopy += patternChar;\n\t\t}\n\t}\n\treturn skeletonCopy;\n}\n/**\n* Maps the [hour cycle type](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Locale/hourCycle)\n* of the given `locale` to the corresponding time pattern.\n* @param locale\n*/\nfunction getDefaultHourSymbolFromLocale(locale) {\n\tlet hourCycle = locale.hourCycle;\n\tif (hourCycle === undefined && locale.hourCycles && locale.hourCycles.length) {\n\t\t// @ts-ignore\n\t\thourCycle = locale.hourCycles[0];\n\t}\n\tif (hourCycle) {\n\t\tswitch (hourCycle) {\n\t\t\tcase \"h24\": return \"k\";\n\t\t\tcase \"h23\": return \"H\";\n\t\t\tcase \"h12\": return \"h\";\n\t\t\tcase \"h11\": return \"K\";\n\t\t\tdefault: throw new Error(\"Invalid hourCycle\");\n\t\t}\n\t}\n\t// TODO: Once hourCycle is fully supported remove the following with data generation\n\tconst languageTag = locale.language;\n\tlet regionTag;\n\tif (languageTag !== \"root\") {\n\t\tregionTag = locale.maximize().region;\n\t}\n\tconst hourCycles = timeData[regionTag || \"\"] || timeData[languageTag || \"\"] || timeData[`${languageTag}-001`] || timeData[\"001\"];\n\treturn hourCycles[0];\n}\n"],"names":[],"mappings":"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","x_google_ignoreList":[0]}