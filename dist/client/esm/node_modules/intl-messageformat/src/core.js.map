{"version":3,"file":"core.js","sources":["../../../../../../node_modules/intl-messageformat/src/core.js"],"sourcesContent":["/*\nCopyright (c) 2014, Yahoo! Inc. All rights reserved.\nCopyrights licensed under the New BSD License.\nSee the accompanying LICENSE file for terms.\n*/\nimport { memoize, strategies } from \"@formatjs/fast-memoize\";\nimport { parse } from \"@formatjs/icu-messageformat-parser\";\nimport { formatToParts, PART_TYPE } from \"./formatters.js\";\n// -- MessageFormat --------------------------------------------------------\nfunction mergeConfig(c1, c2) {\n\tif (!c2) {\n\t\treturn c1;\n\t}\n\treturn {\n\t\t...c1,\n\t\t...c2,\n\t\t...Object.keys(c1).reduce((all, k) => {\n\t\t\tall[k] = {\n\t\t\t\t...c1[k],\n\t\t\t\t...c2[k]\n\t\t\t};\n\t\t\treturn all;\n\t\t}, {})\n\t};\n}\nfunction mergeConfigs(defaultConfig, configs) {\n\tif (!configs) {\n\t\treturn defaultConfig;\n\t}\n\treturn Object.keys(defaultConfig).reduce((all, k) => {\n\t\tall[k] = mergeConfig(defaultConfig[k], configs[k]);\n\t\treturn all;\n\t}, { ...defaultConfig });\n}\nfunction createFastMemoizeCache(store) {\n\treturn { create() {\n\t\treturn {\n\t\t\tget(key) {\n\t\t\t\treturn store[key];\n\t\t\t},\n\t\t\tset(key, value) {\n\t\t\t\tstore[key] = value;\n\t\t\t}\n\t\t};\n\t} };\n}\nfunction createDefaultFormatters(cache = {\n\tnumber: {},\n\tdateTime: {},\n\tpluralRules: {}\n}) {\n\treturn {\n\t\tgetNumberFormat: memoize((...args) => new Intl.NumberFormat(...args), {\n\t\t\tcache: createFastMemoizeCache(cache.number),\n\t\t\tstrategy: strategies.variadic\n\t\t}),\n\t\tgetDateTimeFormat: memoize((...args) => new Intl.DateTimeFormat(...args), {\n\t\t\tcache: createFastMemoizeCache(cache.dateTime),\n\t\t\tstrategy: strategies.variadic\n\t\t}),\n\t\tgetPluralRules: memoize((...args) => new Intl.PluralRules(...args), {\n\t\t\tcache: createFastMemoizeCache(cache.pluralRules),\n\t\t\tstrategy: strategies.variadic\n\t\t})\n\t};\n}\nexport class IntlMessageFormat {\n\tast;\n\tlocales;\n\tresolvedLocale;\n\tformatters;\n\tformats;\n\tmessage;\n\tformatterCache = {\n\t\tnumber: {},\n\t\tdateTime: {},\n\t\tpluralRules: {}\n\t};\n\tconstructor(message, locales = IntlMessageFormat.defaultLocale, overrideFormats, opts) {\n\t\t// Defined first because it's used to build the format pattern.\n\t\tthis.locales = locales;\n\t\tthis.resolvedLocale = IntlMessageFormat.resolveLocale(locales);\n\t\tif (typeof message === \"string\") {\n\t\t\tthis.message = message;\n\t\t\tif (!IntlMessageFormat.__parse) {\n\t\t\t\tthrow new TypeError(\"IntlMessageFormat.__parse must be set to process `message` of type `string`\");\n\t\t\t}\n\t\t\tconst { ...parseOpts } = opts || {};\n\t\t\t// Parse string messages into an AST.\n\t\t\tthis.ast = IntlMessageFormat.__parse(message, {\n\t\t\t\t...parseOpts,\n\t\t\t\tlocale: this.resolvedLocale\n\t\t\t});\n\t\t} else {\n\t\t\tthis.ast = message;\n\t\t}\n\t\tif (!Array.isArray(this.ast)) {\n\t\t\tthrow new TypeError(\"A message must be provided as a String or AST.\");\n\t\t}\n\t\t// Creates a new object with the specified `formats` merged with the default\n\t\t// formats.\n\t\tthis.formats = mergeConfigs(IntlMessageFormat.formats, overrideFormats);\n\t\tthis.formatters = opts && opts.formatters || createDefaultFormatters(this.formatterCache);\n\t}\n\tformat = (values) => {\n\t\tconst parts = this.formatToParts(values);\n\t\t// Hot path for straight simple msg translations\n\t\tif (parts.length === 1) {\n\t\t\treturn parts[0].value;\n\t\t}\n\t\tconst result = parts.reduce((all, part) => {\n\t\t\tif (!all.length || part.type !== PART_TYPE.literal || typeof all[all.length - 1] !== \"string\") {\n\t\t\t\tall.push(part.value);\n\t\t\t} else {\n\t\t\t\tall[all.length - 1] += part.value;\n\t\t\t}\n\t\t\treturn all;\n\t\t}, []);\n\t\tif (result.length <= 1) {\n\t\t\treturn result[0] || \"\";\n\t\t}\n\t\treturn result;\n\t};\n\tformatToParts = (values) => formatToParts(this.ast, this.locales, this.formatters, this.formats, values, undefined, this.message);\n\tresolvedOptions = () => ({ locale: this.resolvedLocale?.toString() || Intl.NumberFormat.supportedLocalesOf(this.locales)[0] });\n\tgetAst = () => this.ast;\n\tstatic memoizedDefaultLocale = null;\n\tstatic get defaultLocale() {\n\t\tif (!IntlMessageFormat.memoizedDefaultLocale) {\n\t\t\tIntlMessageFormat.memoizedDefaultLocale = new Intl.NumberFormat().resolvedOptions().locale;\n\t\t}\n\t\treturn IntlMessageFormat.memoizedDefaultLocale;\n\t}\n\tstatic resolveLocale = (locales) => {\n\t\tif (typeof Intl.Locale === \"undefined\") {\n\t\t\treturn;\n\t\t}\n\t\tconst supportedLocales = Intl.NumberFormat.supportedLocalesOf(locales);\n\t\tif (supportedLocales.length > 0) {\n\t\t\treturn new Intl.Locale(supportedLocales[0]);\n\t\t}\n\t\treturn new Intl.Locale(typeof locales === \"string\" ? locales : locales[0]);\n\t};\n\tstatic __parse = parse;\n\t// Default format options used as the prototype of the `formats` provided to the\n\t// constructor. These are used when constructing the internal Intl.NumberFormat\n\t// and Intl.DateTimeFormat instances.\n\tstatic formats = {\n\t\tnumber: {\n\t\t\tinteger: { maximumFractionDigits: 0 },\n\t\t\tcurrency: { style: \"currency\" },\n\t\t\tpercent: { style: \"percent\" }\n\t\t},\n\t\tdate: {\n\t\t\tshort: {\n\t\t\t\tmonth: \"numeric\",\n\t\t\t\tday: \"numeric\",\n\t\t\t\tyear: \"2-digit\"\n\t\t\t},\n\t\t\tmedium: {\n\t\t\t\tmonth: \"short\",\n\t\t\t\tday: \"numeric\",\n\t\t\t\tyear: \"numeric\"\n\t\t\t},\n\t\t\tlong: {\n\t\t\t\tmonth: \"long\",\n\t\t\t\tday: \"numeric\",\n\t\t\t\tyear: \"numeric\"\n\t\t\t},\n\t\t\tfull: {\n\t\t\t\tweekday: \"long\",\n\t\t\t\tmonth: \"long\",\n\t\t\t\tday: \"numeric\",\n\t\t\t\tyear: \"numeric\"\n\t\t\t}\n\t\t},\n\t\ttime: {\n\t\t\tshort: {\n\t\t\t\thour: \"numeric\",\n\t\t\t\tminute: \"numeric\"\n\t\t\t},\n\t\t\tmedium: {\n\t\t\t\thour: \"numeric\",\n\t\t\t\tminute: \"numeric\",\n\t\t\t\tsecond: \"numeric\"\n\t\t\t},\n\t\t\tlong: {\n\t\t\t\thour: \"numeric\",\n\t\t\t\tminute: \"numeric\",\n\t\t\t\tsecond: \"numeric\",\n\t\t\t\ttimeZoneName: \"short\"\n\t\t\t},\n\t\t\tfull: {\n\t\t\t\thour: \"numeric\",\n\t\t\t\tminute: \"numeric\",\n\t\t\t\tsecond: \"numeric\",\n\t\t\t\ttimeZoneName: \"short\"\n\t\t\t}\n\t\t}\n\t};\n}\n"],"names":[],"mappings":"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","x_google_ignoreList":[0]}